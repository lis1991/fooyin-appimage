# AppImageBuilder.yml ‚Äî –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–±–æ—Ä—â–∏–∫ AppImage –∏–∑ .deb (–±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≤–µ—Ä—Å–∏–∏)
version: 1
app_id: com.example.App

AppDir:
  path: AppDir

  # üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π .deb –∏–∑ GitHub Releases –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –µ–≥–æ
  script:
    - |
      echo "üîç Detecting latest release from fooyin/fooyin..."
      LATEST_TAG=$(curl -s "https://api.github.com/repos/fooyin/fooyin/releases/latest" | jq -r '.tag_name')
      DEB_URL="https://github.com/fooyin/fooyin/releases/download/$LATEST_TAG/fooyin_${LATEST_TAG#v}-plucky_amd64.deb"
      echo "üì• Downloading: $DEB_URL"
      wget -O fooyin_latest.deb "$DEB_URL"

      echo "üì¶ Extracting .deb to AppDir..."
      mkdir -p AppDir
      ar x fooyin_latest.deb
      tar -xf data.tar.xz -C AppDir/

      echo "üóëÔ∏è Cleaning up..."
      rm -f fooyin_latest.deb data.tar.xz control.tar.gz debian-binary

  app_info:
    id: com.example.App
    name: App
    icon: app
    exec: usr/bin/fooyin
    exec_args: $@

  apt:
    arch: amd64
    sources:
      - sourceline: deb http://archive.ubuntu.com/ubuntu noble main restricted universe multiverse
      - sourceline: deb http://archive.ubuntu.com/ubuntu noble-updates main restricted universe multiverse
      - sourceline: deb http://security.ubuntu.com/ubuntu noble-security main restricted universe multiverse
    include:
      - libqt6core6
      - libqt6gui6
      - libqt6widgets6
      - libqt6dbus6
      - libqt6network6
      - libqt6qml6
      - libqt6quick6
      - libqt6quickcontrols2-6
      - libqt6quicktemplates2-6
      - libqt6sql6-sqlite
      - libqt6multimedia6
      - libqt6opengl6
      - libavcodec59
      - libavformat59
      - libswresample4
      - libswscale6
      - libxcb-xinerama0
      - libxcb-xkb1
      - libxkbcommon-x11-0
      - libxcb-xfixes0
      - libxcb-xinput0
      - libxcb-randr0
      - libxcb-shape0
      - libxcb-xrm0
      - libxcb-present0
      - libgl1
      - libglvnd0
      - libglib2.0-0
      - libgtk-3-0
      - libpng16-16
      - libfreetype6
      - libfontconfig1
      - libharfbuzz0b
      - libpango-1.0-0
      - libpangocairo-1.0-0
      - libx11-xcb1
      - libxcomposite1
      - libxcursor1
      - libxdamage1
      - libxi6
      - libxinerama1
      - libxrandr2
      - libxss1
      - libxtst6
      - zlib1g
      - libc6
      - libstdc++6
      - libgcc-s1

  # ‚úÖ –í–ê–ñ–ù–û: –°–ª–æ–≤–∞—Ä—å, –∞ –Ω–µ —Å–ø–∏—Å–æ–∫! –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å AppImageBuilder v1
  files:
    usr/bin/: usr/bin/
    usr/lib/: usr/lib/
    usr/share/applications/: usr/share/applications/
    usr/share/icons/: usr/share/icons/
    usr/share/metainfo/: usr/share/metainfo/
    usr/share/fooyin/: usr/share/fooyin/
    usr/share/doc/: usr/share/doc/

  icons:
    - fooyin.png
    - fooyin.svg

  desktop:
    enabled: true
    name: App
    comment: A modern music player with a focus on high-quality audio playback
    exec: usr/bin/fooyin
    icon: fooyin
    terminal: false
    type: Application
    categories:
      - AudioVideo
      - Audio
    mime_types:
      - audio/mpeg
      - audio/x-flac
      - audio/wav
      - audio/x-wav
      - audio/ogg
      - audio/x-ogg
      - audio/aac
      - audio/x-m4a
      - audio/flac
      - audio/mp4

  permissions:
    usr/bin/fooyin: 755
    usr/share/applications/com.fooyin.Fooyin.desktop: 644
    usr/share/icons/hicolor/*/apps/fooyin.*: 644

AppImage:
  update-information: gh-releases-zsync|fooyin|fooyin|latest|App-latest-x86_64.AppImage.zsync
  compress: zstd
  architecture: x86_64
  sign-key: null

  runtime:
    version: latest
